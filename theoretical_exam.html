	<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8">
  <title>თსბ-ს გამოცდა (dark theme • random 35)</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #0d1117;
      color: #e6edf3;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .quiz-container, .start-screen {
      background: #161b22;
      color: #e6edf3;
      border-radius: 14px;
      box-shadow: 0 0 25px rgba(0,0,0,0.45);
      padding: 28px 38px;
      max-width: 900px;
      width: 90%;
      text-align: center;
    }
    .quiz-container { display: none; }

    .start-screen input {
      width: 80%;
      padding: 12px;
      margin-top: 14px;
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      color: #e6edf3;
      font-size: 17px;
    }
    .start-screen input:focus{
      border-color:#58a6ff;
      outline: none;
    }

    .start-btn {
      margin-top: 25px;
      padding: 14px 32px;
      background-color: #238636;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 17px;
      transition: 0.2s;
    }
    .start-btn:hover { background-color: #2ea043; }

    .question-nav { margin-bottom: 15px; }
    .question-nav button {
      margin: 3px; padding: 6px 12px; border: none;
      border-radius: 5px; background-color: #30363d; cursor: pointer;
      color:white;
    }
    .question-nav button.active { background-color: #58a6ff; color: black; }
    .question-nav button.answered { background-color: #2ea043; color: white; }

.options button {
  display: block;
  width: 100%;
  margin: 10px 0;
  padding: 14px 14px 14px 20px;
  background: #161b22;
  border: 1px solid #30363d;
  border-left: 4px solid #30363d;
  border-radius: 8px;
  cursor: pointer;
  text-align: left;
  font-size: 16px;
  color: #e6edf3;
  transition: 0.15s ease;
}

.options button:hover {
  background: #1f2630;
  border-color: #3a424e;
  transform: translateY(-1px);
}

.options button.correct {
  border-left-color: #2ea043 !important;
  background: #143416 !important;
  color: #e6edf3 !important;
}

.options button.wrong {
  border-left-color: #da3633 !important;
  background: #38191a !important;
  color: #e6edf3 !important;
}

    .result { margin-top: 15px; font-weight: bold; }
  </style>
</head>
<body>
  <div class="start-screen" id="startScreen">
    <h1>მოგესალმები თსბ-ს გამოცდაზე</h1>
    <p>გთხოვ, ჩაწერე შენი სახელი და გვარი:</p>
    <input type="text" id="fullName" placeholder="სახელი და გვარი">
    <br>
    <button class="start-btn" id="startBtn">გამოცდის დაწყება</button>
  </div>

  <div class="quiz-container" id="quizContainer">
    <div class="question-nav" id="questionNav"></div>
    <h2 id="question">შეკითხვა იტვირთება...</h2>
    <div id="options" class="options"></div>
    <div id="result" class="result"></div>
    <button id="finishQuizBtn" class="start-btn" style="margin-top:15px;">დასრულება</button>
  </div>

  <!-- SCRIPT stays 100% unchanged BELOW -->
  <script>
    // ... შენი სრული script ნაწილი იგივე რჩება, არაფერს არ ვცვლი ...
  </script>
</body>
</html>


  <script>
    // --- ყველა 56 შეკითხვა (მაგალითად 3 ნიმუში + დანარჩენი შენ ჩაამატე)
const allQuestions = [
  {
    "question": "საბროკერო კომპანიას უფლება აქვს თსბ-ის სავაჭრო სისტემაში გარიგება დადოს იმ ფასიანი ქაღალდებზე, რომელიც განთავსებული აქვს",
    "options": [
      "შესაბამის ანგარიშზე ფასიანი ქაღალდების დამოუკიდებელ რეგისტრატორში",
      "საბროკერო კოპანიის ანგარიშსწორების ბანკში",
      "მხოლოდ საბროკერო კომპანიის საკუთარი სახსრების ანგარიშზე ცენტრალურ დეპოზიტარში",
      "განაცხადში მითითებულ ანგარიშზე ცენტრალურ დეპოზიტარში"
    ],
    "correct": 3
  },
  {
    "question": "საბროკერო კომპანიას უფლება აქვს თსბ-ის სავაჭრო სისტემაში გარიგება დადოს იმ ფულადი რესურსების ფარგლებში",
    "options": [
      "რომელიც მას განთავსებული აქვს საბროკერო კოპანიის ანგარიშსწორების ბანკში",
      "რომელიც მას განთავსებული აქვს განაცხადში მითითებული ანგარიშის შესაბამის ანგარიშსწორების ბანკში",
      "რომლის შესაბამისი სავაჭრო ლიმიტიც არსებობს განაცხადში მითითებული ანგარიშის შესაბამის ანგარიშსწორების ბანკში"
    ],
    "correct": 2
  },
  {
    "question": "თსბ-ის სავაჭრო სისტემაში შესაძლებელია გარიგების დადება",
    "options": [
      "მხოლოდ საბროკერო კომპანიის საკუთარი სახსრების ანგარიშზე განთავსებული ფასიანი ქაღალდებით ცენტრალურ დეპოზიტარში",
      "იმ ფასიანი ქაღალდებით, რომლებიც ვაჭრობის დაწყებამდე ბლოკირებულია ფასიანი ქაღალდების დამოუკიდებელ რეგისტრატორთან",
      "იმ ფულადი სახსრების გამოყენებით, რომელიც მას განთავსებული აქვს განაცხადში მითითებული ანგარიშის შესაბამის ანგარიშსწორების ბანკში",
      "იმ ფულადი სახსრებით, რომლის შესაბამისი სავაჭრო ლიმიტიც არსებობს განაცხადში მითითებული ანგარიშის შესაბამის ანგარიშსწორების ბანკში"
    ],
    "correct": 3
  },
  {
    "question": "‘Fill or kill’ ტიპის სავაჭრო განაცხადის შეყვანისას გარიგება შესაძლებელია დაიდოს",
    "options": [
      "მხოლოდ იმ შემთხვევაში თუ ეს განცხადი წარმოადგენს შემხვედრ განაცხადს",
      "მაშინ, როდესაც მოხდება შესაბამისი შემხვედრი განაცხადის შეყვანა სისტემაში",
      "განაცხადში მითითებული ფასიანი ქაღალდების ნაწილობრივ რაოდენობაზე"
    ],
    "correct": 0
  },
  {
    "question": "სავაჭრო განაცხადი უნდა მოიცავდეს შემდეგ ინფორმაციას",
    "options": [
      "პასუხი-ა: ფასიანი ქაღალდის კოდს",
      "პასუხი-ბ: განაცხადის ტიპს",
      "პასუხი-გ: იმ რეგისტრატორისა და ბანკის კოდებს, სადაც მოხდება ანგარიშსწორება დადებულ გარიგებაზე",
      "პასუხები ა:, ბ: და გ: ერთად",
      "პასუხები ა: და ბ: ერთად"
    ],
    "correct": 4
  },
  {
    "question": "განაცხადი შეიძლება იყოს",
    "options": [
      "პასუხი-ა: გაყიდვაზე ან ყიდვაზე",
      "პასუხი-ბ: Market to limit order ტიპის",
      "პასუხი-გ: იმ პირობით, რომ ავტომატურად გაუქმდეს ამ განცხადის შესაბამისი პირველადი განაცხადის არ არსებობის შემთვევაში",
      "პასუხი-დ: Suspended (ჩრდილი) სტატუსით",
      "პასუხები ა:, ბ:, გ: და დ: ერთად",
      "პასუხები ა:, ბ: და დ: ერთად"
    ],
    "correct": 4
  },
  {
    "question": "თსბ-ის სავაჭრო სისტემაში სავაჭრო განაცხადის მინიმალური ბიჯი",
    "options": [
      "უდრის 1 თეთრს",
      "უდრის 0,1 ლარს",
      "განისაზღვრება საუკეთესო ფასის 1%-ით",
      "განისაზღვრება ფასიანი ქაღალდის ერთეულის ფასის მიხედვით"
    ],
    "correct": 3
  },
  {
    "question": "სავაჭრო განაცხადის პარამეტრები უნდა აკმაყოფილებდეს შემდეგ პირობებს",
    "options": [
      "ერთეულის ფასი შესაძლოა მოიცავდეს მძიმის შემდგომ მაქსიმუმ 4 ციფრს",
      "ღირებულება არ უნდა იყოს 1000 დოლარზე ნაკლები",
      "ღირებულება არ უნდა იყოს 100 ლარზე ნაკლები",
      "ფასი შეიძლება შეიცავდეს არაუმეტეს ხუთი ციფრით გამოსახულ რიცხვს"
    ],
    "correct": 0
  },
  {
    "question": "სავაჭრო განაცხადში მითითებული ფასი არის",
    "options": [
      "განაცხადში მითითებული ფასიანი ქაღალდების ჯამური ფასი",
      "იგივე, რაც განაცხადის ღირებულება",
      "განაცხადში მითითებული ფასიანი ქაღალდების ერთეულის ფასი ან პირველადი/შემხვედრი განცხადის ფასი Market order ტიპის განაცხადის შემთხვევაში",
      "განაცხადში მითითებული ფასიანი ქაღალდების ერთეულის ფასისა და რაოდენობის ნამრავლი"
    ],
    "correct": 2
  },
  {
    "question": "სავაჭრო განაცხადით წარმოშობილი პასუხისმგებლობისაგან დროებითი გათავისუფლება (გარდა იმ შემთხვევებისა, თუ აღნიშნული სავაჭრო განაცხადის საფუძველზე დაიდო გარიგება) შესაძლებელია მხოლოდ",
    "options": [
      "პასუხი-ა: კავშირგაბმულობის ხაზის დაზიანებისას, როდესაც მოვაჭრე წევრის მიერ სავაჭრო სისტემის გამოყენება ფერხდება ან შეუძლებელი ხდება",
      "პასუხი-ბ: დაუძლეველი ძალის (ფორს-მაჟორული) პირობების დადგომისას",
      "პასუხებში-ა: ან/და ბ: აღწერილი შემთხვევის დადგომის შესახებ სავაჭრო სისტემის ადმინისტრატორს წერილობითი სახით შეტყობინების შემდგომ, რის საფუძველზეც სავაჭრო სისტემის ადმინისტრატორი გონივრულ ვადაში მოახდენს რეაგირებას",
      "არცერთი პასუხი არ არის სწორი"
    ],
    "correct": 2
  },
  {
    "question": "თუ განაცხადის ტიპია ‘Fill or Kill’-ი, ეს ნიშნავს, რომ გარიგება შეიძლება დაიდოს",
    "options": [
      "მხოლოდ წინასწარ შეთანხმებულ მხარეებს შორის",
      "მხოლოდ განაცხადის სრულ მოცულობაზე",
      "მხოლოდ განმცხადებლის თანხმობის შემთხვევაში",
      "მხოლოდ სავაჭრო სესიის დამთავრების შემდეგ"
    ],
    "correct": 1
  },
  {
    "question": "თუ განაცხადი გვხვდება Order book-ში, ეს ნიშნავს, რომ ამ განაცხადზე გარიგება შეიძლება დაიდოს",
    "options": [
      "ნებისმიერ ფასში",
      "ნებისმიერი მოცულობით",
      "მხოლოდ განაცხადში მითითებული ფასში",
      "მხოლოდ ფასიანი ქაღალდების განაცხადში მითითებულ რაოდენობაზე",
      "ფასიანი ქაღალდების განაცხადში მითითებულ რაოდენობაზე ან ნაკლებზე"
    ],
    "correct": 4
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 3000-ს, ხოლო გაყიდვაზე - 5500-ს. პირველი განაცხადის ტიპია Limit order, ხოლო Time in Force მნიშვნელობა არის ‘Good till week’, ხოლო შემხვედრი გაყიდვის განაცხადის ტიპია ‘Market Order’, ხოლო Time in Force-ის მნიშვნელობა არის ‘Fill or Kill’. რა მოცულობით დაიდება გარიგება?",
    "options": [
      "3000",
      "5500",
      "2500",
      "გარიგება არ დაიდება"
    ],
    "correct": 3
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 700-ს, ხოლო გაყიდვაზე - 1100-ს. ორივე განაცხადის ტიპია ‘Limit Order’, ხოლო Time in Force პარამეტრის მნიშვნელობა - ‘Day’. რა მოცულობით დაიდება გარიგება, თუ განაცხადების ფასები ერთნაირია?",
    "options": [
      "700",
      "1100",
      "400",
      "გარიგება არ დაიდება"
    ],
    "correct": 0
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 1250-ს, ხოლო გაყიდვაზე - 3250-ს. პირველი განაცხადის ტიპია Limit order, ხოლო Time in Force მნიშვნელობა არის ‘Good till week’, ხოლო გაყიდვის განაცხადის ტიპია ‘Market Order’, ხოლო Time in Force-ის მნიშვნელობა არის ‘Day’. რა მოცულობით დაიდება გარიგება?",
    "options": [
      "1250",
      "3250",
      "2000",
      "გარიგება არ დაიდება"
    ],
    "correct": 0
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 500-ს, ხოლო გაყიდვაზე - 1700-ს. პირველი განაცხადის ტიპია Limit order, ხოლო Time in Force მნიშვნელობა არის ‘Good till month’, ხოლო შემხვედრი გაყიდვის განაცხადის ტიპია ‘Market Order’, ხოლო Time in Force-ის მნიშვნელობა არის ‘Immediate or cancel’. რა მოცულობით დაიდება გარიგება?",
    "options": [
      "1700",
      "1200",
      "500",
      "გარიგება არ დაიდება"
    ],
    "correct": 2
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 3000-ს, ხოლო გაყიდვაზე - 5500-ს. პირველი განაცხადის ტიპია Limit order. შემხვედრი გაყიდვის განაცხადის ტიპია ‘Market Order’. რა მოცულობით და რა ფასად დაიდება გარიგება, თუ ორივე განაცხადის Time in Force პარამეტრის მნიშვნელობაა ‘Day’?",
    "options": [
      "3000 ცალზე, განაცხადში მითითებული ფასიანი ქაღალდის გახსნის ფასად",
      "5500 ცალზე, Limit Order-ში მითითებულ ფასად",
      "3000 ცალზე, Limit Order-ში მითითებულ ფასად",
      "გარიგება არ დაიდება"
    ],
    "correct": 2
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 400-ს, ხოლო გაყიდვაზე - 700-ს. პირველი განაცხადის ტიპია Limit order, ხოლო Time in Force მნიშვნელობა არის ‘Good till month’, ხოლო შემხვედრი გაყიდვის განაცხადის ტიპია ‘Market Order’, ხოლო Time in Force-ის მნიშვნელობა არის ‘Immediate or cancel’. რა მოცულობის განაცხად(ებ)ი დარჩება ‘Order Book’-ში გარიგების დადების შემდგომ ?",
    "options": [
      "ყიდვაზე 400, ხოლო გაყიდვაზე 700, რადგან გარიგება არ დაიდება",
      "ყიდვაზე 400",
      "გაყიდვაზე 300",
      "Order book-ში განაცხად(ებ)ი არ დარჩება"
    ],
    "correct": 3
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 2500-ს, ხოლო გაყიდვაზე - 5000-ს. პირველ განაცხადში მითითებული ფასია - 1.5 ლარი, ხოლო შემხვედრ გაყიდვის განაცხადში მითითებული ფასია - 1.3 ლარი. რა ფასით დაიდება გარიგება, თუ ორივე განაცხადის ტიპია ‘Limit Order’, ხოლო Time in Force პარამეტრის მნიშვნელობაა ‘Day’?",
    "options": [
      "1.5 ლარი",
      "1.3 ლარი",
      "1.4 ლარი",
      "ამ ფასიანი ქაღალდზე არსებულ ბოლო ფასად",
      "გარიგება არ დაიდება"
    ],
    "correct": 1
  },
  {
    "question": "ყიდვაზე განაცხადის მოცულობა შეადგენს 200-ს, ხოლო გაყიდვაზე - 800-ს. პირველ განაცხადში მითითებული ფასია - 1.45 ლარი, ხოლო განაცხადის ტიპია ‘Limit Order’. შემხვედრი გაყიდვის განაცხადის ტიპია ‘Stop limit order’ მითითებული ფასია - 1.33 ლარი, Stop ფასით 1.35 ლარი. რა მოცულობით დაიდება გარიგება, თუ ორივე განაცხადის Time in Force პარამეტრის მნიშვნელობაა ‘Day’, ხოლო ფასიანი ქაღალდის ბოლო ფასია 1.40 ლარი?",
    "options": [
      "200",
      "800",
      "600",
      "გარიგება არ დაიდება"
    ],
    "correct": 3
  },
  {
    "question": "გარიგება არ შეიძლება დაიდოს",
    "options": [
      "სხვა მონაწილის სავაჭრო სისტემაში არსებული განაცხადის საფუძველზე",
      "სავაჭრო სისტემაში მონაწილის მიერ შეტანილი საკუთარი განაცხადის საფუძველზე",
      "ფასიანი ქაღალდების ისეთ რაოდენობაზე, რომელიც ნაკლებია სტანდარტული ლოტის სიდიდეზე",
      "Suspend (ჩრდილი) სტატუსის მქონე განაცხადზე",
      "იმ განაცხადის საფუძველზე, რომელიც ბოლო დადებული გარიგების ფასზე დაბალია"
    ],
    "correct": 3
  },
  {
    "question": "გარიგება არ შეიძლება დაიდოს",
    "options": [
      "სხვა მონაწილის სავაჭრო სისტემაში არსებული განაცხადის საფუძველზე",
      "სავაჭრო სისტემაში მონაწილის მიერ შეტანილი საკუთარი განაცხადის საფუძველზე",
      "ფასიანი ქაღალდების ისეთ რაოდენობაზე, რომელიც ნაკლებია სტანდარტული ლოტის სიდიდეზე",
      "Removed (გაუქმებული) სტატუსის მქონე განაცხადზე",
      "იმ განაცხადის საფუძველზე, რომელიც ბოლო დადებული გარიგების ფასზე დაბალია"
    ],
    "correct": 3
  },
  {
    "question": "სავაჭრო სისტემაში განაცხადის შეყვანის უფლება აქვს",
    "options": [
      "პასუხი-ა: ბირჟის წევრი საბროკერო კომპანიის ნებისმიერ თანამშრომელს",
      "პასუხი-ბ: ბირჟის წევრი საბროკერო კომპანიის ნებისმიერ თანამშრომელს, თუ განაცხადის შეყვანა ხდება საბროკერო კომპანიის საკუთარი სახსრების ანგარიშზე",
      "პასუხი-გ: ბირჟის წევრი საბროკერო კომპანიის მხოლოდ იმ თანამშრომელს, რომელსაც გააჩნია თსბ-ის შესაბამისი ატესტაცია და ამასთან, ნებადართული აქვს სავაჭრო სისტემაში მუშაობა (აქვს ინდივიდუალური ელექტრონული გასაღები, მომხმარებლი.)"
    ],
    "correct": 2
  },
  {
    "question": "ბირჟას შეუძლია მოთხოვოს ბროკერს განმეორებითი ატესტაციის გავლა",
    "options": [
      "პასუხი-ა: მის მიმართ კლიენტის საფუძვლიანი, დადასტურებული პრეტენზიების შემთხვევაში",
      "პასუხი-ბ: ფასიანი ქაღალდების მარეგულირებელი კანონმდებლობისა და ნორმატიული ბაზის არსებითი ცვლილების შემთხვევაში",
      "პასუხი-გ: სავაჭრო სისტემასა და წესებში ცვლილების შეტანის შემთხვევაში",
      "პასუხი ა:, ბ: და გ: ერთად"
    ],
    "correct": 3
  },
  {
    "question": "ყველა საბროკერო კომპანიის ატესტირებული ბროკერის პერსონალური პაროლი",
    "options": [
      "განისაზღვრება სავაჭრო სისტემის ადმინისტრატორის მიერ",
      "სავალდებულოა, რომ ერთი საბროკერო კომპანიის ყველა თანმშრომლისთვის იყოს იდენტური",
      "განისაზღვრება თითოეული ბროკერის მიერ ინდივიდუალურად სისტემური მოთხოვნების შესაბამისად სისტემაში პირველადი შესვლისას"
    ],
    "correct": 2
  },
  {
    "question": "დადებული გარიგების ანგარიშსწორებას ახორციელებს",
    "options": [
      "ბირჟა თავისი წევრების დავალებით",
      "ბირჟის წევრები, დაუყონებლივ სავაჭრო სესიის დამთავრების შემდეგ",
      "ცენტრალური დეპოზიტარი, მის წევრებსა და ბირჟასთან შეთანხმების საფუძველზე",
      "ბირჟა, მის წევრებსა და ცენტრალურ დეპოზიტართან შეთანხმებით"
    ],
    "correct": 2
  },
  {
    "question": "სავაჭრო სესიის დაწყებამდე საჭირო პროცედურებს მიეკუთვნება",
    "options": [
      "დავალებებისა და სავაჭრო რესურსების გადამოწმება",
      "პაროლის აღება ბირჟის პასუხისმგებელი თანამშრომლისაგან",
      "ბირჟაზე კლიენტის შესაყვანი საშვის აღება",
      "გარიგების დადებაზე ნებართვის აღება"
    ],
    "correct": 0
  },
  {
    "question": "რა ტიპის განაცხადს ვერ შევხვდებით Order Book-ში?",
    "options": [
      "პასუხი - ა: Market to Limit Order, რომლის Time in Force პარამეტრის მნიშვნელობაა ‘Good till week’",
      "პასუხი - ბ: Market Order, რომლის Time in Force პარამეტრის მნიშვნელობაა ‘Immediate or Cancel’",
      "პასუხი - გ: Limit Order, რომლის Time in Force პარამეტრის მნიშვნელობაა ‘Fill or Kill’",
      "პასუხები - ბ: და გ:",
      "ყველა პასუხი სწორია"
    ],
    "correct": 3
  },
  {
    "question": "რა ფულადი სახსრების ფარგლებში შეუძლია საბროკერო კომპანიას გარიგების დადება",
    "options": [
      "ანგარიშსწორების აგენტის მიერ შესაბამისი ანგარიშისთვის გაწერილი სავაჭრო ლიმიტის (Trading ceiling) ფარგლებში",
      "სავაჭრო სისტემის ადმინისტრატორის მიერ შესაბამისი ანგარიშისთვის გაწერილი სავაჭრო ლიმიტის (Trading ceiling) ფარგლებში",
      "ანგარიშსწორების ბანკში შესაბამის ანგარიშზე განთავსებული ფულადი სახსრების ფარგლებში"
    ],
    "correct": 0
  },
  {
    "question": "სავაჭრო სისტემაში ყიდვაზე არსებული საუკეთესო განაცხადის ფასია 1,2 ლარი. რა ფასად დაფიქსირდება გარიგება, თუ სისტემაში შეყვანილ იქნება გაყიდვის განაცხადი 1,3 ლარზე?",
    "options": [
      "1,2",
      "1,3",
      "1,25",
      "გარიგება არ დაიდება"
    ],
    "correct": 1
  },
  {
    "question": "სავაჭრო სისტემაში გაყიდვაზე არსებული საუკეთესო განაცხადის ფასია 1,5 ლარი, მოცელობა - 1000 ცალი აქცია. რა ფასად დაფიქსირდება გარიგება, თუ სისტემაში შეყვანილ იქნება ყიდვის განაცხადი 1,4 ლარზე მოცულობა 800?",
    "options": [
      "1,5",
      "1,4",
      "1,45",
      "გარიგება არ დაიდება"
    ],
    "correct": 3
  },
  {
    "question": "რა შემთხვევაში აქვს უფლება საბროკერო კომპანიას ივაჭროს ნომინალურ მფლობელობაში არსებული ფასიანი ქაღალდებით?",
    "options": [
      "თუ რეგისტრირებული მესაკუთრის კუთვნილი ფასიანი ქაღალდები განთავსებულია მის ანგარიშზე დამოუკიდებელ რეგისტრატორში",
      "თუ ფასიანი ქაღალდები განთავსებულია ცენტრალურ დეპოზიტარში საბროკერო კომპანიის შესაბამის ანგარიშზე",
      "თუ რეგისტრირებული მესაკუთრის კუთვნილი ფასიანი ქაღალდები განთავსებულია საბროკერო კომპანიის ნომინალური მფლობელობის ანგარიშზე რეგისტრატორში"
    ],
    "correct": 1
  },
  {
    "question": "წევრის სავაჭრო სისტემაში შესვლა ნიშნავს",
    "options": [
      "ბირჟის წევრ-აქციონერად გახდომას",
      "წევრის რწმუნებული ბროკერის ბირჟაზე ატესტირებასა და პაროლის დადგენას",
      "წევრის მიერ ატესტირებული ბროკერის სავაჭრო სისტემაში ჩართვას ინდივიდუალური ელექტრონული გასაღებისა და მომხმარებლის საშუალებით",
      "წევრი ითვლება სავაჭრო სისტემაში \"შესულად\" სისტემაში პირველი სავაჭრო განაცხადის შეტანის მომენტიდან"
    ],
    "correct": 2
  },
  {
    "question": "თსბ-ის წევრები ვალდებულნი არიან, რომ უზრუნველყონ მიმდინარე, ყოფილ და პოტენციურ მომხმარებელთა შესახებ ინფორმაციის კონფიდენციალობის დაცვა, გარდა იმ შემთხვევისა, თუ",
    "options": [
      "ინფორმაცია ეხება არალეგალურ მოქმედებებს მომხმარებლის ან პოტენციური მომხმარებლის მხრიდან",
      "გამჟღავნება მოითხოვება კანონით",
      "ინფორმაციის გამჟღავნებაზე თანხმობას გასცემს მომხმარებელი ან პოტენციური მომხმარებელი",
      "ყველა პასუხი სწორია"
    ],
    "correct": 1
  },
  {
    "question": "ბროკერმა კლიენტისათვის ფასიანი ქაღალდების ყიდვა-გაყიდვის დავალება უნდა შეასრულოს",
    "options": [
      "ბროკერისთვის ხელსაყრელი ფასით",
      "იმ ფასში, რომელშიც ეს შესაძლებელია",
      "კლიენტის საუკეთესო ინტერესის დაცვისათვის შესაფერის ფასში",
      "იმ ფასში, რომელშიც იგი ყველაზე სწრაფად შესრულებადია"
    ],
    "correct": 2
  },
  {
    "question": "რა თანხას არ უნდა აღემატებოდეს საბროკერო კომპანიის მიერ გაცემული (ან მიღებული) გასამრჯელო ან ფულადი საჩუქარი, რომელიც დაკავშირებულია საბროკერო კომპანიის ან ბროკერის საქმიანობასთან?",
    "options": [
      "100-ს",
      "150-ს",
      "200-ს"
    ],
    "correct": 0
  },
  {
    "question": "სავაჭრო სისტემაში ყიდვაზე არსებული საუკეთესო განაცხადის ფასია 1,2 ლარი. რა ფასში დაფიქსირდება გარიგება, თუ სისტემაში შეყვანილ იქნება გაყიდვის განაცხადი 1,1 ლარზე?",
    "options": [
      "1,2",
      "1,1",
      "1,25",
      "გარიგება არ დაიდება"
    ],
    "correct": 1
  },
  {
    "question": "სავაჭრო სისტემა გარიგების დადების უპირატესობის თვალსაზრისით პრიორიტეტს ანიჭებს იმ განაცხადებს, რომელიც",
    "options": [
      "გაკეთებულია საუკეთესო ფასში",
      "უფრო დიდი მოცულობით",
      "უფრო ადრეა გაკეთებული",
      "გაკეთდა კლიენტის ინტერესებიდან განონდინარე"
    ],
    "correct": 0
  },
  {
    "question": "ინსაიდერულ ვაჭრობას მიეკუთვნება: ისეთი გარიგებების დადება, რომელიც",
    "options": [
      "პირველი იდება საბირჟო ვაჭრობის დაწყებისთანავე",
      "იდება ისეთი პირების მიერ, რომლებსაც ხელი მიუწვდებათ ამ ფასიან ქაღალდთან ან/და მის ემიტენტთან დაკავშირებულ კონფიდენციალურ ინფორმაციაზე",
      "იდება ბირჟის გარეთ",
      "იდება საბროკერო კომპანიის დირექტორის სასარგებლოდ"
    ],
    "correct": 1
  },
  {
    "question": "თბილისის საფონდო ბირჟის სავაჭრო სისტემა არის",
    "options": [
      "თავისუფალი საბირჟო ვაჭრობის სისტემა",
      "უწყვეტი აუქციონის სისტემა",
      "ბირჟის წევრთა სისტემა",
      "ღია საბირჟო სისტემა"
    ],
    "correct": 1
  },
  {
    "question": "“დათვის” ბაზარი ნიშნავს, რომ ბაზარი მოძრაობს",
    "options": [
      "ნელა",
      "ზემოთ",
      "ქვემოთ",
      "ჩქარა",
      "არ მოძრაობს"
    ],
    "correct": 2
  },
  {
    "question": "“ხარის” ბაზარი ნიშნავს, რომ ბაზარი მოძრაობს",
    "options": [
      "ნელა",
      "ზემოთ",
      "ქვემოთ",
      "ჩქარა",
      "არ მოძრაობს"
    ],
    "correct": 1
  },
  {
    "question": "ბირჟის სავაჭრო სისტემაში ფასიანი ქაღალდის \"საუკეთესო ფასი\" ნიშნავს",
    "options": [
      "ყველაზე მაღალ ფასს",
      "ყველაზე მოხერხებულ ფასს",
      "შესყიდვის შემთხვევაში ყველაზე დაბალ ფასს, გაყიდვის შემთხვევაში ყველაზე მაღალ ფასს",
      "შესყიდვის შემთხვევაში ყველაზე მაღალ ფასს, გაყიდვის შემთხვევაში ყველაზე დაბალ ფასს"
    ],
    "correct": 3
  },
  {
    "question": "რა შეიძლება იყოს ფასიანი ქაღალდის გახსნის ფასი",
    "options": [
      "მხოლოდ წინა სავაჭრო სესიის დახურვის ფასი",
      "მხოლოდ გახსნის ფასის აუქციონით დადგენილი ფასი",
      "მხოლოდ მითითებული ფასი",
      "მითითებული ფასი ან გახსნის ფასის აუქციონით დადგენილი ფასი"
    ],
    "correct": 3
  },
  {
    "question": "რა შეიძლება იყოს ფასიანი ქაღალდის ბოლო ფასი",
    "options": [
      "Quotes driven Market -ზე დადებული ბოლო გარიგების ფასი",
      "Order driven Market-ზე დადებული სტანდარტული ლოტის ბოლო გარიგების ფასი",
      "Order driven Market-ზე დადებული ნებისმიეტი ლოტის ბოლო გარიგების ფასი"
    ],
    "correct": 1
  },
  {
    "question": "დახურვის ფასის დაითვლება, როგორც",
    "options": [
      "საბირჟო და არასაბირჟო ტიპის გარიგებების საშუალო შეწონილი",
      "სავაჭრო სესიის მიმდინარეობისას დადებული ყველა ტიპის გარიგებების საშუალო შეწონილი",
      "სავაჭრო სესიის მიმდინარეობისას დადებული მხოლოდ სტანდარტული ლოტის გარიგებების საშუალო შეწონილი",
      "სავაჭრო სესიის მიმდინარეობისას დადებული მხოლოდ არასტანდარტული ლოტის გარიგებების საშუალო შეწონილი"
    ],
    "correct": 2
  },
  {
    "question": "სტანდარული ლოტის გარიგებად ითვლება",
    "options": [
      "გარიგება, რომელიც დადებულია ფასიანი ქაღალდების არანაკლებ იმ რაოდენობაზე, რაც ფასიანი ქაღალდის ფასის მიხედვით ბირჟის მიერ განსაზღვრულია სავაჭრო ერთეულად",
      "ნებისმიერი გარიგება, რომელიც იდება სავაჭრო სისტემის მეშვეობით",
      "ნებისმიერი გარიგება, რომელიც დადებულია სავაჭრო სესიაზე"
    ],
    "correct": 0
  },
  {
    "question": "რა ტიპის გარიგების დადება ეკრძალება მოვაჭრე წევრს",
    "options": [
      "თუ გარიგების ორივე მხარეს წარმოადგენს ერთიდაიგივე კლიენტი",
      "თუ გარიგების ორივე მხარეს წარმოაგენს თავად საბროკერო კომპანია, მოქმედი საკუთარ ინტერესებში",
      "თუ გარიგების დადება არღვევს ინსაიდერული ვაჭრობის და ბაზრის მანიპულაციის აკრძალივის მიმართ მოქმედი კანონმდებლობის და ბირჟის წესებით დადგენილ შეზღუდვებს",
      "ყველა პასუხი სწორია"
    ],
    "correct": 2
  },
  {
    "question": "რას წარმოადგენს დინამიური ფასთა დერეფანი",
    "options": [
      "დინამიურ ფასთა დერეფნით განსაზღვრული მაჩვენებელი წარმოადგენს ფასიანი ქაღალდის ბოლო ფასისგან განსხვავებული დაშვებული მაქსიმალურ ფასის ცვლილებას შემხვედრ განაცხადში",
      "დინამიურ ფასთა დერეფნით განსაზღვრული მაჩვენებელი წარმოადგენს ფასიანი ქაღალდის გახსნის ფასისგან განსხვავებული დაშვებული მაქსიმალურ ფასის ცვლილებას შემხვედრ განაცხადში",
      "დინამიურ ფასთა დერეფნით განსაზღვრული მაჩვენებელი წარმოადგენს ფასიანი ქაღალდის მითითებული ფასისგან განსხვავებული დაშვებული მაქსიმალურ ფასის ცვლილებას შემხვედრ განაცხადში"
    ],
    "correct": 0
  },
  {
    "question": "Order book-ში გვაქვს აქტიური გაყიდვის განაცხადი 300 ფასიან ქაღალდზე 1.1 ლარად. ბაზარზე განსაზღვრული დინამიური ფასთა დერეფანი შეადგენს 50%-ს, ხოლო სტატიკური ფასთა დერეფანი 75%-ს. ამ ფასიანი ქაღალდის ბოლო ფასია 1 ლარი, ხოლო მითითებული ფასი 0.99 ლარი. რა მოხდება, თუ სისტემაში შევიყვანთ ყიდვის განაცხადს 200 ფასიან ქაღალდზე 1.6 ლარად",
    "options": [
      "გარიგება დაიდება 200 ცალ ფასიან ქაღალდზე 1.1 ლარად",
      "გარიგება დაიდება 200 ცალ ფასიან ქაღალდზე 1.6 ლარად და მოხდება ამ ფასიან ქაღალდზე ვაჭრობის შეჩერება",
      "გარიგება არ დაიდება, რადგან სისტემა არ მიიღებს განაცხადს 1.6 ლარად",
      "არცერთი პასუხი არ არის სწორი"
    ],
    "correct": 2
  },
  {
    "question": "Order book-ში გვაქვს აქტიური გაყიდვის განაცხადი 300 ფასიან ქაღალდზე 1.4 ლარად. ბაზარზე განსაზღვრული დინამიური ფასთა დერეფანი შეადგენს 50%-ს, ხოლო სტატიკური ფასთა დერეფანი 75%-ს. ამ ფასიანი ქაღალდის ბოლო ფასია 1.35 ლარი, ხოლო მითითებული ფასი 1.0 ლარი. რა მოხდება, თუ სისტემაში შევიყვანთ ყიდვის განაცხადს 200 ფასიან ქაღალდზე 1.8 ლარად",
    "options": [
      "გარიგება დაიდება 200 ცალ ფასიან ქაღალდზე 1.35 ლარად",
      "გარიგება დაიდება 200 ცალ ფასიან ქაღალდზე 1.8 ლარად და მოხდება ამ ფასიან ქაღალდზე ვაჭრობის შეჩერება",
      "გარიგება არ დაიდება, რადგან სისტემა არ მიიღებს განაცხადს 1.6 ლარად",
      "გარიგება არ დაიდება და მოხდება ამ ფასიან ქაღალდზე ვაჭრობის შეჩერება"
    ],
    "correct": 3
  },
  {
    "question": "Quotes Market-ზე დადებული გარიგების ანგარიშსწორებას ახორციელებს",
    "options": [
      "ბირჟა თავისი წევრების დავალებით",
      "ცენტრალური დეპოზიტარი, მის წევრებსა და ბირჟასთან შეთანხმების საფუძველზე",
      "Quotes Market-ზე დადებული გარიგების ანგარიშსწორება არ ხდება, რადგან წარმოადგენს უკვე დადებული გარიგების დაფიქსირებას"
    ],
    "correct": 1
  },
  {
    "question": "External Market-ზე დადებული გარიგების ანგარიშსწორებას ახორციელებს",
    "options": [
      "ბირჟა თავისი წევრების დავალებით",
      "ცენტრალური დეპოზიტარი, მის წევრებსა და ბირჟასთან შეთანხმების საფუძველზე",
      "External Market-ზე დადებული გარიგების ანგარიშსწორება არ ხდება, რადგან წარმოადგენს სავაჭრო სისტემის გარეთ დადებული გარიგების დაფიქსირებას"
    ],
    "correct": 2
  },
  {
    "question": "რა შემთხვევაშია ვალდებული საბროკერო კომპანიის თანამშრომელი წარმოადგინოს ფასიანი ქაღალდებით გარიგებების დაფიქსირების  განაცხადი?",
    "options": [
      "თუ სავაჭრო სისტემაში გარიგების დაფიქსირება მოხდა გარიგების დადების შემდეგ დღეს",
      "ნებისმიერ შემთხვევაში",
      "თუ სავაჭრო სისტემაში გარიგების დაფიქსირება მოხდა გარიგების დადების დღეს"
    ],
    "correct": 0
  },
  {
    "question": "ვინ ახორციელებს სავაჭრო სისტემის გარეთ დადებული გარიგების დაფიქსირებას?",
    "options": [
      "სავაჭრო სისტემის ადმინისტრატორი",
      "საბროკერო კომპანიის თანამშრომელი",
      "საბროკერო კომპანიის თანამშრომელი ან/და სავაჭრო სისტემის ადმინისტრატორი შესაბამისი საკომისიოს სანაცვლოდ"
    ],
    "correct": 2
  },
  {
    "question": "საფონდო ბირჟის ინდექსი",
    "options": [
      "ახასიათებს ბაზრის მდგომარეობას და გაანგარიშებულია ბირჟაზე დაშვებული ფასიანი ქაღალდების საბაზრო ფასების გათვალისწინებით",
      "მტკიცდება ბირჟის სამეთვალყურეო საბჭოს მიერ",
      "დგინდება ეროვნული ბანკის მიერ ყოველდღიურად",
      "ქვეყნდება საფონდო ბირჟის მიერ ყოველი სავაჭრო სესიის შედეგად, სალისტინგო ფასიანი ქაღალდების საუკეთესო ფასების დასადგენად"
    ],
    "correct": 0
  }
      // აქ დაამატე დანარჩენი კითხვები (სულ უნდა იყოს 56)
    ];

    function getRandomQuestions(allQuestions, count) {
      const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
      return shuffled.slice(0, count);
    }

    const quiz = getRandomQuestions(allQuestions, 35);

    let current = 0;
    let answers = Array(quiz.length).fill(null);
    let userName = "";
	let examRunning = false;   // მიმდინარეობს გამოცდა
    let allowedExit = false;   // ნებადართულია fullscreen-იდან გამოსვლა (დასრულების დროს)
    let finishingRequested = false; // დააჭირეს თუ არა "დასრულებას"


    const startScreen = document.getElementById('startScreen');
    const startBtn = document.getElementById('startBtn');
    const quizContainer = document.getElementById('quizContainer');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const resultEl = document.getElementById('result');
    const navEl = document.getElementById('questionNav');
    const finishBtn = document.getElementById('finishQuizBtn');
    const fullNameInput = document.getElementById('fullName');

    startBtn.onclick = async () => {
  userName = fullNameInput.value.trim();
  if (!userName) {
    alert("გთხოვ, ჩაწერე შენი სახელი და გვარი.");
    return;
  }

  // Fullscreen ჩართვა (მომხმარებლის კლიკზე ნებადართულია)
  const el = document.documentElement;
  if (el.requestFullscreen) await el.requestFullscreen();
  else if (el.webkitRequestFullscreen) await el.webkitRequestFullscreen();

  examRunning = true;
  allowedExit = false;
  finishingRequested = false;

  startScreen.style.display = 'none';
  quizContainer.style.display = 'block';
  loadQuestion(0);
};
document.addEventListener("keydown", (e) => {
  if (e.key === "F11") {
    e.preventDefault();
    if (examRunning && !allowedExit) {
      failExam("❌ Anti-Cheat: დააჭირე F11 — გამოცდა ჩაითვალა ჩაუტარებლად.");
    }
  }
});
document.addEventListener("fullscreenchange", () => {
  const inFullscreen = !!document.fullscreenElement;

  // თუ fullscreen-იდან გამოვიდა და გამოცდა მიმდინარეობდა
  if (!inFullscreen && examRunning) {

    // დასრულების ნებადართული სცენარი (ღილაკით დაადასტურა)
    if (allowedExit && finishingRequested) {
      doFinishQuiz(); // ოფიციალური დასრულება
      return;
    }

    // სხვა ყველა შემთხვევაში — ჩითი (Esc/F11/სხვა გამოსვლა)
    failExam("❌ Anti-Cheat: გამოვიდა Full Screen-დან — გამოცდა ჩაითვალა ჩაუტარებლად.");
  }
});


    quiz.forEach((_, i) => {
      const btn = document.createElement('button');
      btn.textContent = i + 1;
      btn.onclick = () => loadQuestion(i);
      navEl.appendChild(btn);
    });

    function updateNav() {
      const buttons = navEl.querySelectorAll('button');
      buttons.forEach((btn, i) => {
        btn.classList.remove('active', 'answered');
        if (i === current) btn.classList.add('active');
        if (answers[i] !== null) btn.classList.add('answered');
      });
    }

    function loadQuestion(index) {
      current = index;
      const q = quiz[index];
      questionEl.textContent = q.question;
      optionsEl.innerHTML = "";
      resultEl.textContent = "";

      q.options.forEach((option, i) => {
        const btn = document.createElement('button');
        btn.textContent = option;
        btn.onclick = () => checkAnswer(i, btn);
        optionsEl.appendChild(btn);
      });
      updateNav();
    }

    function checkAnswer(selectedIndex, clickedButton) {
      const q = quiz[current];
      const buttons = optionsEl.querySelectorAll("button");

      if (answers[current] !== null) return;

      answers[current] = selectedIndex;
      const correctIndex = q.correct;

      buttons.forEach((btn, i) => {
        btn.disabled = true;
        if (i === correctIndex) btn.classList.add("correct");
        if (i === selectedIndex && i !== correctIndex) btn.classList.add("wrong");
      });

      resultEl.textContent = selectedIndex === correctIndex ? "✅ სწორი პასუხია!" : "❌ არასწორია!";
      resultEl.style.color = selectedIndex === correctIndex ? "green" : "red";
      updateNav();
    }

    finishBtn.onclick = () => {
  const confirmFinish = confirm("დარწმუნებული ხარ, რომ გსურს გამოცდის დასრულება?");
  if (!confirmFinish) return;

  // ვუთხრათ სისტემას, რომ ახლა ნებადართული გამოსვლაა
  finishingRequested = true;
  allowedExit = true;

  // ჯერ გამოვიდეთ fullscreen-იდან — ამაზე fullscreenchange გამოიძახებს doFinishQuiz()
  if (document.exitFullscreen) document.exitFullscreen();
  else doFinishQuiz(); // თუ fullscreen არ არის, დავასრულოთ პირდაპირ
};

function doFinishQuiz() {

  alert("FINISH TRIGGERED");

 const correctCount = answers.reduce((acc, ans, i) => acc + (ans === quiz[i].correct ? 1 : 0), 0);

  const quizData = { 
    name: userName, 
    questions: quiz, 
    answers: answers, 
    correctCount: correctCount 
  };

  // save results local for result.html
  localStorage.setItem("quizResults", JSON.stringify(quizData));

  const payload = {
    name: quizData.name,
    score: quizData.correctCount,
    total: quizData.questions.length,
    percent: Math.round((quizData.correctCount / quizData.questions.length) * 100),
    date: new Date().toLocaleString('ka-GE', { 
      day: '2-digit', 
      month: '2-digit', 
      year: 'numeric', 
      hour: '2-digit', 
      minute: '2-digit' 
    }),
    passed: quizData.correctCount >= 23,
    details: quizData.questions.map((q, i) => ({
      question: q.question,
      userAnswer: q.options[quizData.answers[i]] || "",
      correctAnswer: q.options[q.correct] || ""
    }))
  };

  // სურვილისამებრ დატოვე/წაშალე:
  alert("SENDING TO GOOGLE SCRIPT NOW");
  console.log("SENDING PAYLOAD", payload);

  const url = "https://script.google.com/macros/s/AKfycby6fqOmFLSQGE43t4BMtsMbrgJgC8PgDES8cCU5Lh_1OnAOnYJ0-E1yyKrQMvyvqUts/exec";

  fetch(url, {
    method: "POST",
    mode:"no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  }).then(r=>console.log("fetch sent",r))
  .catch(e=>console.log("error",e));

  examRunning = false;
  setTimeout(()=>{ window.location.href="results.html"; }, 1200);
}
function failExam(message = "⛔ გამოცდა ჩაითვალა ჩაუტარებლად!") {
  try { document.exitFullscreen?.(); } catch(e) {}

  const quizData = {
    name: userName || "უცნობი",
    questions: quiz,
    answers: answers,
    correctCount: 0,
    failed: true
  };

  localStorage.setItem("quizResults", JSON.stringify(quizData));
  alert(message);
  examRunning = false;
  window.location.href = "results.html";
}

  </script>
</body>
</html>
